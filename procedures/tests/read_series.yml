# yaml-language-server: $schema=../../public/schemas/sequence.json 
sequence:
- procedureName: ReadProcedure
  # read puntual with no filters 
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
    output: ../../tmp/series_puntual.json
    options:
      pretty: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 2500
      max_length: 2500
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: puntual
      all: true
- procedureName: ReadProcedure
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 10
      var_id: 67
      proc_id: 4
      unit_id: 11
    output: ../../tmp/series.json
    options:
      pretty: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 10
      max_length: 10
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: puntual
      all: true
  - testName: PropertyEqualsTest
    arguments:
      property_name: var.id
      property_value: 67
      all: true
  - testName: PropertyEqualsTest
    arguments:
      property_name: unidades.id
      property_value: 11
      all: true
  - testName: PropertyEqualsTest
    arguments:
      property_name: procedimiento.id
      property_value: 4
      all: true
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion.id
      all: true
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion.geom
- procedureName: ReadProcedure
  arguments:
    class_name: serie
    filter:
      tipo: areal
      limit: 10
      has_obs: true
    output: ../../tmp/series_areal.json
    options:
      pretty: true
  tests:
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: areal
      all: true
  - testName: ArrayLengthTest
    arguments:
      min_length: 10
      max_length: 10
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion.id
- procedureName: ReadProcedure
  arguments:
    class_name: serie
    filter:
      tipo: raster
      limit: 5
      has_obs: true
    output: ../../tmp/series_rast.json
    options:
      pretty: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: raster
      all: true
  - testName: ArrayLengthTest
    arguments:
      min_length: 5
      max_length: 5
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion.id
- procedureName: ReadProcedure
  # areal con geometria
  arguments:
    class_name: serie
    filter:
      tipo: areal
      limit: 1
    output: ../../tmp/series_areal_w_geom.json
    options:
      pretty: true
      include_geom: true
  tests:
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion.geom
  - testName: PropertyIsInstanceOfTest
    arguments:
      class_name: geometry
      property_name: estacion.geom
      all: true
- procedureName: ReadProcedure
  # raster con geometria
  arguments:
    class_name: serie
    filter:
      tipo: raster
      limit: 1
    output: ../../tmp/series_raster_w_geom.json
    options:
      pretty: true
      include_geom: true
  tests:
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion.geom
  - testName: PropertyIsInstanceOfTest
    arguments:
      class_name: geometry
      property_name: estacion.geom
      all: true
- procedureName: ReadProcedure
  # puntual sin metadatos
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
    output: ../../tmp/series_puntual_w_o_md.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: var_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: GeneralCategory
  - testName: PropertyExistsTest
    arguments:
      property_name: proc_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: unit_nombre
- procedureName: ReadProcedure
  # areal sin metadatos
  arguments:
    class_name: serie
    filter:
      tipo: areal
      limit: 2500
    output: ../../tmp/series_areal_w_o_md.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: var_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: GeneralCategory
  - testName: PropertyExistsTest
    arguments:
      property_name: proc_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: unit_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: fuentes_id
  - testName: PropertyExistsTest
    arguments:
      property_name: fuentes_nombre
- procedureName: ReadProcedure
#  raster sin metadatos
  arguments:
    class_name: serie
    filter:
      tipo: raster
      limit: 2500
    output: ../../tmp/series_raster_w_o_md.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: PropertyExistsTest
    arguments:
      property_name: estacion_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: var_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: GeneralCategory
  - testName: PropertyExistsTest
    arguments:
      property_name: proc_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: unit_nombre
  - testName: PropertyExistsTest
    arguments:
      property_name: fuentes_id
  - testName: PropertyExistsTest
    arguments:
      property_name: fuentes_nombre
- procedureName: ReadProcedure
  # puntual filtro data_availability h
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      data_availability: h
    output: ../../tmp/series.json
    options:
      pretty: true
  tests:
  - testName: PropertyEqualsOneOfTest
    arguments:
      property_name: date_range.data_availability
      property_value: ["H","C","NRT","RT","H+S","C+S","NRT+S","RT+S"]
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
- procedureName: ReadProcedure
  # puntual filtro data_availability c
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 5
      data_availability: c
      timestart:
        days: -60
      timeend:
        days: 0
    output: ../../tmp/series_c_w_data.json
    options:
      pretty: true
  tests:
  - testName: PropertyEqualsOneOfTest
    arguments:
      property_name: date_range.data_availability
      property_value: ["C","NRT","RT","C+S","NRT+S","RT+S"]
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.timeend
      property_value:
        days: -60
      all: true
  - testName: ArrayLengthTest
    arguments:
      property_name: observaciones
      min_length: 1
- procedureName: ReadProcedure
  # puntual filtro data_availability c no data
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      proc_id: [1,2]
      data_availability: c
      timestart:
        days: -60
      timeend:
        days: 0
    output: ../../tmp/series_c_no_data.json
    options:
      pretty: true
      no_data: true
  tests:
  - testName: PropertyEqualsOneOfTest
    arguments:
      property_name: date_range.data_availability
      property_value: ["C","NRT","RT","C+S","NRT+S","RT+S"]
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.timeend
      property_value:
        days: -60
      all: true
- procedureName: ReadProcedure
  # puntual filtro data_availability n
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      proc_id: [1,2]
      data_availability: n
    output: ../../tmp/series_nrt.json
    options:
      pretty: true
  tests:
  - testName: PropertyEqualsOneOfTest
    arguments:
      property_name: date_range.data_availability
      property_value: ["NRT","RT","NRT+S","RT+S"]
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.timeend
      property_value:
        days: -3
      all: true
- procedureName: ReadProcedure
  # puntual filtro data_availability r
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      proc_id: [1,2]
      data_availability: r
    output: ../../tmp/series_rt.json
    options:
      pretty: true
  tests:
  - testName: PropertyEqualsOneOfTest
    arguments:
      property_name: date_range.data_availability
      property_value: ["RT","RT+S"]
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.timeend
      property_value:
        days: -1
      all: true
- procedureName: ReadProcedure
  # areal filtro data_availability r
  arguments:
    class_name: serie
    filter:
      tipo: areal
      data_availability: r
      limit: 2500
    output: ../../tmp/series_areal_rt.json
    options:
      pretty: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: areal
      all: true
  - testName: PropertyEqualsOneOfTest
    arguments:
      property_name: date_range.data_availability
      property_value: ["RT","RT+S"]
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.timeend
      property_value:
        days: -1
      all: true
- procedureName: ReadProcedure
  # areal filtro date_range_after
  arguments:
    class_name: serie
    filter:
      tipo: areal
      limit: 2500
      date_range_after:
        days: 1
    output: ../../tmp/series_areal_date_range_after.json
    options:
      no_data: true
      pretty: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: areal
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.timeend
      property_value:
        days: 1
      all: true
- procedureName: ReadProcedure
  # areal filtro date_range_before
  arguments:
    class_name: serie
    filter:
      tipo: areal
      limit: 2500
      date_range_before:
        years: -10
    output: ../../tmp/series_areal_date_range_before.json
    options:
      no_data: true
      pretty: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: tipo
      property_value: areal
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: date_range.count
      property_value: 1
      all: true
  - testName: PropertyIsEqualOrSmallerThanTest
    arguments:
      property_name: date_range.timestart
      property_value:
        years: -10
      all: true
- procedureName: ReadProcedure
  # puntual con pagination
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 250
    output: ../../tmp/series_puntual_page_1.json
    options:
      pretty: true
      pagination: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: is_last_page
      property_value: false
  - testName: PropertyEqualsTest
    arguments:
      property_name: next_offset
      property_value: 250
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: total
      property_value: 4000
  - testName: ArrayLengthTest
    arguments:
      property_name: rows
      min_length: 250
      max_length: 250
- procedureName: ReadProcedure
  # puntual con pagination
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 250
      offset: 250
    output: ../../tmp/series_puntual_page_2.json
    options:
      pretty: true
      pagination: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: is_last_page
      property_value: false
  - testName: PropertyEqualsTest
    arguments:
      property_name: next_offset
      property_value: 500
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: total
      property_value: 4000
  - testName: ArrayLengthTest
    arguments:
      property_name: rows
      min_length: 250
      max_length: 250
- procedureName: ReadProcedure
  # areal con pagination (última página)
  arguments:
    class_name: serie
    filter:
      tipo: areal
      fuentes_id: 3
      data_availability: r
      limit: 50
      offset: 200
    output: ../../tmp/series_areal_page_2.json
    options:
      pretty: true
      pagination: true
  tests:
  - testName: PropertyEqualsTest
    arguments:
      property_name: is_last_page
      property_value: true
  - testName: PropertyIsUndefinedTest
    arguments:
      property_name: next_offset
  - testName: PropertyIsEqualOrSmallerThanTest
    arguments:
      property_name: total
      property_value: 216
  - testName: ArrayLengthTest
    arguments:
      property_name: rows
      min_length: 1
      max_length: 49
  - testName: PropertyEqualsTest
    arguments:
      parent_property: rows
      property_name: tipo
      property_value: areal
      all: true
  - testName: PropertyEqualsTest
    arguments:
      parent_property: rows
      property_name: date_range.data_availability
      property_value: RT
      all: true
  - testName: PropertyEqualsTest
    arguments:
      parent_property: rows
      property_name: estacion.id
      property_value: 444
      index: 1
- procedureName: ReadProcedure
  # puntual con pronos
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      proc_id: [1,2,6]
      has_prono: true
      limit: 2500
    output: ../../tmp/series_puntual_con_prono.json
    options:
      pretty: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      property_name: pronosticos
      min_length: 1
      all: true
- procedureName: ReadProcedure
  # puntual con pronos sin metadata
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      proc_id: [1,2,6]
      has_prono: true
      limit: 2500
    output: ../../tmp/series_puntual_con_prono_no_md.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      property_name: geom.coordinates
      min_length: 2
      max_length: 2
      all: true
  - testName: PropertyEqualsTest
    arguments:
      property_name: geom.type
      property_value: Point
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: forecast_date
      property_value:
        years: -1
      all: true
- procedureName: ReadProcedure
  # puntual con pronos filter by cal_id
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      cal_id: 492
      limit: 2500
    output: ../../tmp/series_areal_filter_cal_id.json
    options:
      pretty: true
  tests:
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      parent_property: pronosticos
      property_name: forecast_date
      property_value:
        years: -1
      all: true
  - testName: PropertyEqualsTest
    arguments:
      parent_property: pronosticos
      property_name: cal_id
      property_value: 492
      all: true
- procedureName: ReadProcedure
  # puntual con pronos filter by cal_id no md
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      cal_id: 492
      limit: 2500
    output: ../../tmp/series_areal_filter_cal_id_no_md.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: forecast_date
      property_value:
        years: -1
      all: true
  - testName: ArrayLengthTest
    arguments:
      min_length: 6
      max_length: 6
- procedureName: ReadProcedure
  # puntual con pronos filter by cal_grupo_id
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      cal_grupo_id: 1
      limit: 2500
    output: ../../tmp/series_puntual_filter_cal_grupo_id.json
    options:
      pretty: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      property_name: pronosticos
      min_length: 1
      max_length: 1
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      parent_property: pronosticos
      property_name: forecast_date
      property_value:
        years: -1
      all: true
  - testName: PropertyEqualsTest
    arguments:
      parent_property: pronosticos
      property_name: cal_grupo_id
      property_value: 1
      all: true
- procedureName: ReadProcedure
  # puntual con pronos filter by cal_grupo_id no md
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      cal_grupo_id: 1
      limit: 2500
    output: ../../tmp/series_areal_filter_cal_grupo_id_no_md.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: forecast_date
      property_value:
        years: -1
      all: true
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 40
- procedureName: ReadProcedure
  # puntual filter by geom box
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      geom: "-58,-33,-57,-32"
      limit: 2500
    output: ../../tmp/series_puntual_bbox.json
    options:
      pretty: true
      include_geom: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: estacion.geom.coordinates.0
      property_value: -58
      all: true
  - testName: PropertyIsEqualOrSmallerThanTest
    arguments:
      property_name: estacion.geom.coordinates.0
      property_value: -57
      all: true
  - testName: PropertyIsEqualOrGreaterThanTest
    arguments:
      property_name: estacion.geom.coordinates.1
      property_value: -33
      all: true
  - testName: PropertyIsEqualOrSmallerThanTest
    arguments:
      property_name: estacion.geom.coordinates.1
      property_value: -32
      all: true
- procedureName: ReadProcedure
  # puntual filter by geom point
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      geom: "-57.65,-32.69"
      limit: 2500
    output: ../../tmp/series_puntual_point.json
    options:
      pretty: true
      include_geom: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
  - testName: PropertyEqualsTest
    arguments:
      property_name: estacion.geom.coordinates.0
      property_value: -57.65
      all: true
  - testName: PropertyEqualsTest
    arguments:
      property_name: estacion.geom.coordinates.1
      property_value: -32.69
      all: true
- procedureName: ReadProcedure
  # areal filter by geom box (intersects)
  arguments:
    class_name: serie
    filter:
      tipo: areal
      var_id: 15
      fuentes_id: 3
      geom: "-58,-33,-57,-32"
      limit: 2500
    output: ../../tmp/series_areal_bbox.json
    options:
      pretty: true
      include_geom: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 6
      max_length: 6
- procedureName: ReadProcedure
  # areal filter by geom point (contains)
  arguments:
    class_name: serie
    filter:
      tipo: areal
      var_id: 15
      fuentes_id: 3
      geom: "-57.65,-32.69"
      limit: 2500
    output: ../../tmp/series_areal_point.json
    options:
      pretty: true
      include_geom: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual sort by estacion asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      var_id: 2
      proc_id: 1
      unit_id: 11
      limit: 250
    output: ../../tmp/series_sorted_estacion.json
    options:
      pretty: true
      no_metadata: true
      sort: estacion_id
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: estacion_id
- procedureName: ReadProcedure
  # puntual sort by var asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      estacion_id: 2830
      proc_id: 1
      unit_id: 11
      limit: 250
    output: ../../tmp/series_sorted_var.json
    options:
      pretty: true
      no_metadata: true
      sort: var_id
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: var_id
- procedureName: ReadProcedure
  # puntual sort by proc asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      estacion_id: 2830
      var_id: 2
      unit_id: 11
      limit: 250
    output: ../../tmp/series_sorted_proc.json
    options:
      pretty: true
      no_metadata: true
      sort: proc_id
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: proc_id
- procedureName: ReadProcedure
  # puntual sort by unit asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      estacion_id: 2830
      proc_id: [1,2]
      limit: 250
    output: ../../tmp/series_sorted_unit.json
    options:
      pretty: true
      no_metadata: true
      sort: unit_id
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: unit_id
- procedureName: ReadProcedure
  # puntual sort by serie asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 250
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: id
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: id
- procedureName: ReadProcedure
  # puntual sort by var_name asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      sort: var_name
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: var.nombre
- procedureName: ReadProcedure
  # puntual sort by timestart asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      has_obs: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      sort: timestart
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: date_range.timestart
- procedureName: ReadProcedure
  # puntual sort by timeend asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      has_obs: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      sort: timeend
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: date_range.timeend
- procedureName: ReadProcedure
  # puntual sort by count asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      has_obs: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: count
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: count
- procedureName: ReadProcedure
  # puntual sort by forecast_date asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      has_prono: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: forecast_date
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: forecast_date
- procedureName: ReadProcedure
  # puntual sort by data_availability asc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: data_availability
      order: asc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: data_availability
- procedureName: ReadProcedure
  # puntual sort by estacion desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      var_id: 2
      proc_id: 1
      unit_id: 11
      limit: 250
    output: ../../tmp/series_sorted_estacion.json
    options:
      pretty: true
      no_metadata: true
      sort: estacion_id
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: estacion_id
      order: desc
- procedureName: ReadProcedure
  # puntual sort by var desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      estacion_id: 2830
      proc_id: 1
      unit_id: 11
      limit: 250
    output: ../../tmp/series_sorted_var.json
    options:
      pretty: true
      no_metadata: true
      sort: var_id
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: var_id
      order: desc
- procedureName: ReadProcedure
  # puntual sort by proc desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      estacion_id: 2830
      var_id: 2
      unit_id: 11
      limit: 250
    output: ../../tmp/series_sorted_proc.json
    options:
      pretty: true
      no_metadata: true
      sort: proc_id
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: proc_id
      order: desc
- procedureName: ReadProcedure
  # puntual sort by unit desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      estacion_id: 2830
      proc_id: [1,2]
      limit: 250
    output: ../../tmp/series_sorted_unit.json
    options:
      pretty: true
      no_metadata: true
      sort: unit_id
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: unit_id
      order: desc
- procedureName: ReadProcedure
  # puntual sort by serie desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 250
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: id
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 250
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: id
      order: desc
- procedureName: ReadProcedure
  # puntual sort by var_name desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      sort: var_name
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: var.nombre
      order: desc
- procedureName: ReadProcedure
  # puntual sort by timestart desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      has_obs: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      sort: timestart
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: date_range.timestart
      order: desc
- procedureName: ReadProcedure
  # puntual sort by timeend desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      has_obs: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      sort: timeend
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: date_range.timeend
      order: desc
- procedureName: ReadProcedure
  # puntual sort by count desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      tabla: sat2
      has_obs: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: count
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: count
      order: desc
- procedureName: ReadProcedure
  # puntual sort by forecast_date desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      has_prono: true
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: forecast_date
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: forecast_date
      order: desc
- procedureName: ReadProcedure
  # puntual sort by data_availability desc
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
    output: ../../tmp/series_sorted.json
    options:
      pretty: true
      no_metadata: true
      sort: data_availability
      order: desc
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 2500
  - testName: ArrayIsOrderedTest
    arguments:
      property_name: data_availability
      order: desc
- procedureName: ReadProcedure
  # puntual search id
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: 1206
      id: [1206]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search id mismatch
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: 1207
      id: [1206]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: EmptyArrayTest
    arguments: {}
- procedureName: ReadProcedure
  # puntual search by tabla
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: estaciones_virtuales
      id: [1206]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by tabla mismatch
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: alturas_prefe
      id: [1206]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: EmptyArrayTest
    arguments: {}
- procedureName: ReadProcedure
  # puntual search by estacion.nombre
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: santa rosa
      id: [1206]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.id
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: 357
      id: [1206]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.id_externo
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: 3030
      id: [1]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.rio
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: GUALEGUAYCHU
      id: [1]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.distrito
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: Entre Rios
      id: [1]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.pais
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: Argentina
      id: [1]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.propietario
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: SSRH
      id: [102]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.ubicacion
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: partido
      id: [36]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.localidad
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: quilmes
      id: [26201]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
- procedureName: ReadProcedure
  # puntual search by estacion.var.nombre
  arguments:
    class_name: serie
    filter:
      tipo: puntual
      limit: 2500
      search: altura hidrométrica
      id: [26201]
    output: ../../tmp/series_searched.json
    options:
      pretty: true
      no_metadata: true
  tests:
  - testName: ArrayLengthTest
    arguments:
      min_length: 1
      max_length: 1
